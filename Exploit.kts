/**
 * Kotlin script that demonstrates how to connect to an Android device using ADB
 * Working on Androids Version 10,11,12 and 13
 * Author: Taylor Christian Newsome (Twitter: @ClumsyLulz)
 * Website: ObsidianIntel.com
 */

import java.io.BufferedReader
import java.io.InputStreamReader

fun main() {
    // Replace with your device IP address
    val deviceIp = "192.168.1.10"

    // Replace with the path to your ADB executable
    val adbPath = "/path/to/adb"

    val connectCmd = "$adbPath connect $deviceIp"
    println("Running command: $connectCmd")
    executeCommand(connectCmd)

    val shellCmd = "$adbPath -s $deviceIp shell"
    println("Running command: $shellCmd")
    executeCommand(shellCmd)
}

fun executeCommand(cmd: String) {
    val process = Runtime.getRuntime().exec(cmd)
    val reader = BufferedReader(InputStreamReader(process.inputStream))
    var line: String?
    while (reader.readLine().also { line = it } != null) {
        println(line)
    }
    reader.close()
}
